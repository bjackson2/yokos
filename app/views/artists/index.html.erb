<h1>Artists</h1>

<% if can_edit_data? %>
  <div class="my-8">
    <%= link_to new_artist_path do %>
      <%= button_tag "Add new artist", class: "btn-secondary" %>
    <% end %>
  </div>
<% end %>

<div class="my-8">
  <%= form_for @artist_search, url: artists_path, method: :get, data: { turbo: false } do |form| %>
    <%= render "shared/forms/text_field", form: form, field: :search, label: "Search" %>
  <% end %>
</div>

<em><%= number_with_delimiter(@artist_search.artist_count) %> <%= 'artist'.pluralize(@artist_search.artist_count) %></em>

<ul role="list" class="divide-y divide-gray-100 my-8">
  <% @artists.each do |artist| %>
    <li class="flex justify-between gap-x-6 py-5">
      <%= link_to artist_path(artist) do %>
        <div class="flex min-w-0 gap-x-4">
          <% if artist.main_image.attached? %>
            <%= image_tag artist.main_image, class: "h-14 w-14 flex-none rounded-full bg-gray-50" %>
          <% end %>
          <div class="min-w-0 flex-auto">
            <p class="font-semibold leading-6 text-gray-900"><%= artist_display_name(artist) %></p>
          </div>
        </div>
      <% end %>
      <% if can_edit_data? %>
        <div class="hidden shrink-0 sm:flex sm:flex-col sm:items-end">
          <p class="leading-6 text-gray-900"><%= link_to "Edit", edit_artist_path(artist) %></p>
        </div>
      <% end %>
    </li>
  <% end %>
</ul>

<%= render "shared/pagination", collection: @artists %>