<h1>Artist</h1>

<div>
  <%= link_to "Back to all artists", admin_artists_path %>
</div>

<div class="flex flex-col gap-10 pt-12 sm:flex-row">
  <% if @artist.main_image.attached? %>
    <%= image_tag @artist.main_image, class: "w-52 flex-none rounded-2xl object-cover" %>
  <% end %>
  <div class="max-w-xl flex-auto">
    <h3 class="text-lg font-semibold leading-8 tracking-tight text-gray-900"><%= @artist.name %></h3>
    <% if @artist.file_under.present? %>
      <p class="text-base leading-7 text-gray-600">File under: <%= @artist.file_under %></p>
    <% end %>
  </div>
</div>

<div class="my-6">
  <%= link_to edit_admin_artist_path(@artist) do %>
    <%= button_tag "Edit Artist", class: "btn-secondary" %>
  <% end %>
</div>

<h2 class="mt-8">Albums</h2>

<% @artist.albums.sorted.each do |album| %>
  <div class="flex flex-col gap-10 pt-12 sm:flex-row">
    <% if album.main_image.attached? %>
      <%= image_tag album.main_image, class: "w-52 flex-none rounded-2xl object-cover" %>
    <% end %>
    <div class="max-w-xl flex-auto">
      <h3 class="text-lg font-semibold leading-8 tracking-tight text-gray-900"><%= album.title %></h3>
      <% if album.file_under.present? %>
        <p class="text-base leading-7 text-gray-600">File under: <%= album.file_under %></p>
      <% end %>
      <p class="text-base leading-7 text-gray-600">Release date: <%= album.release_date.strftime("%B %-d, %Y") %></p>
      <div class="my-2">
        <strong>Links</strong>
        <ul class="list-disc ml-8">
          <% album.links.each do |link| %>
            <li>
              <p class="text-base leading-7 text-gray-600"><%= link_to link.text, link.uri, target: "_blank" %><span class="ml-6"><%= link_to "Edit", edit_link_path(link) %></span></p>
            </li>
          <% end %>
        </ul>
      </div>
      <div>
        <%= link_to "Add link", new_link_path(owner_type: album.class, owner_id: album.id) %>
      </div>
      <div>
        <%= link_to "Edit Album", edit_admin_artist_album_path(@artist, album) %>
      </div>
    </div>
  </div>
<% end %>

<div class="my-6">
  <%= link_to new_admin_artist_album_path(artist_id: @artist) do %>
    <%= button_tag "Add Album", class: "btn-secondary" %>
  <% end %>
</div>